import{a0 as ae,a1 as re,F as x,V as e}from"./libs-CZASmHnA.js";import{R as ne,A as ie,X as oe,a as le,D as G,T as K,b as Z,V as J,c as Q,L as ee,d as de}from"./charts-cC89YrqE.js";import{u as D,c as M}from"./index-Xp3MNgms.js";import"./web3-crypto-BAtjRPbI.js";x.config({DECIMAL_PLACES:6,ROUNDING_MODE:x.ROUND_HALF_DOWN});const $=e.jsx("img",{src:"images/cargando.gif",height:"20px",alt:"loading..."}),ce=[{label:"Hours",value:"hour"},{label:"Days",value:"day"}],he=[{label:"Last 7 ",value:"7"},{label:"Last 30 ",value:"30"},{label:"Last 90 ",value:"90"},{label:"Last 180 ",value:"180"},{label:"All ",value:"0"}],ue=[{label:"Last 6 ",value:"6"},{label:"Last 12 ",value:"12"},{label:"Last 24 ",value:"24"},{label:"Last 48 ",value:"48"},{label:"Last 72 ",value:"72"},{label:"All ",value:"0"}];let z=[],te=0,q=0,se=null;class me extends re.Component{constructor(r){super(r);const{t}=this.props;this.state={APR:0,APY:0,minCompra:1,minventa:1,deposito:t("loading")+"...",valueBRST:"",valueTRX:"",cantidad:0,tiempo:0,enBrutus:0,tokensEmitidos:0,enPool:0,solicitado:0,data:[],solicitudes:0,solicitudesV3:0,temporalidad:t("day"),cantidadDatos:30,dias:t("loading")+"...",days:[{days:30,amount:0,time:0,APY:0},{days:90,amount:0,time:0,APY:0},{days:180,amount:0,time:0,APY:0},{days:360,amount:0,time:0,APY:0}],varBrut:0,precioBrst:0,varBrst:0,misBRST:0,dataBRST:[],contractEnergy:0,userEnergy:0,ModalTitulo:"",ModalBody:"",tiempoPromediado:30,promE7to1day:0,resultCalc:0,diasCalc:360,brutCalc:1e3,balanceBRST:0,balanceTRX:0,balanceUSDT:new x(0),balanceUSDD:new x(0),globDepositos:[],eenergy:62e3,energyOn:!1,total_required:0,isOwner:!1,isAdmin:!1,interesCompuesto:0,crecimientoPorcentual:0,precioUSDT:new x(0),precioUSDD:new x(0),retiroRapido:new x(0),penalty:0,from:"trx",to:"brst",par:"trx_brst",selector:"trx",rapida:!0,valueFrom:new x(0),valueTo:new x(0)},this.subeobaja=this.subeobaja.bind(this),this.textoE=this.textoE.bind(this),this.consultaPrecio=this.consultaPrecio.bind(this),this.grafico=this.grafico.bind(this),this.compra=this.compra.bind(this),this.venta=this.venta.bind(this),this.estado=this.estado.bind(this),this.preClaim=this.preClaim.bind(this),this.handleChange=this.handleChange.bind(this),this.handleChange2=this.handleChange2.bind(this),this.handleChangeDias=this.handleChangeDias.bind(this),this.handleChangeCalc=this.handleChangeCalc.bind(this),this.llenarBRST=this.llenarBRST.bind(this),this.llenarTRX=this.llenarTRX.bind(this),this.rentEnergy=this.rentEnergy.bind(this),this.handleCurrencyChangeFrom=this.handleCurrencyChangeFrom.bind(this),this.handleCurrencyChangeTo=this.handleCurrencyChangeTo.bind(this),this.calcExchange=this.calcExchange.bind(this),this.exchangeTokens=this.exchangeTokens.bind(this),this.suawpTokenFromTRX=this.suawpTokenFromTRX.bind(this),this.calculoEnergy=this.calculoEnergy.bind(this),this.preExchange=this.preExchange.bind(this),this.costEnergy=this.costEnergy.bind(this)}componentDidMount(){const{t:r}=this.props;document.getElementById("tittle").innerText=r("brst.tittle"),se=setInterval(()=>{Date.now()>=q&&(this.props.contrato.ready?q=Date.now()+60*1e3:q=Date.now()+3*1e3,this.estado())},3*1e3)}componentWillUnmount(){this.root&&this.root.dispose(),clearInterval(se)}handleCurrencyChangeFrom=r=>{let{to:t}=this.state;const a=r.target.value;a==="usdt"&&(t="brst"),a==="usdd"&&(t="brst"),a===t&&(a==="trx"?t="brst":t="trx"),document.getElementById("currencySelectTo").value=t,this.setState({from:a,to:t,par:a+"_"+t}),this.calcExchange(!1,a+"_"+t)};handleCurrencyChangeTo=r=>{let{from:t}=this.state;const a=r.target.value;a==="trx"&&(t="brst"),a==="brst"&&(t="trx"),document.getElementById("currencySelectFrom").value=t,this.setState({from:t,to:a,par:t+"_"+a}),this.calcExchange(!0,a+"_"+t)};handleChange(r){let t=r.target.value;this.grafico(500,t,this.state.cantidadDatos,document.getElementById("selector").value),this.setState({temporalidad:t})}handleChange2(r){let t=parseInt(r.target.value);this.grafico(500,this.state.temporalidad,t,document.getElementById("selector").value),this.setState({cantidadDatos:t})}handleChangeDias(r){let t=r.target.value,a=(this.state.brutCalc*this.state.precioBrst*(this.state.promE7to1day/100)).toFixed(6);a=a*parseInt(t),this.setState({diasCalc:parseInt(t),resultCalc:a})}handleChangeCalc(r){let t=r.target.value,a=(t*this.state.precioBrst*(this.state.promE7to1day/100)).toFixed(6);a=a*parseInt(this.state.diasCalc),this.setState({brutCalc:t,resultCalc:a})}calcExchange(r=!1,t="trx_brst"){let{precioBrst:a,precioUSDT:o,precioUSDD:n}=this.state,m=r?"amountTo":"amountFrom",d=new x(0);if(o.toNumber()<=0||n.toNumber()<=0)return d;let l=document.getElementById(m).value.replace(/,/g,".");switch(l=new x(parseFloat(l)),r?this.setState({valueTo:l}):this.setState({valueFrom:l}),t){case"usdt_brst":d=l.div(o),d=d.div(a);break;case"brst_usdt":d=l.times(o),d=d.times(a);break;case"usdd_brst":d=l.div(n),d=d.div(a);break;case"brst_usdd":d=l.times(n),d=d.times(a);break;case"brst_trx":d=l.times(a);break;case"trx_brst":d=l.div(a);break}return m=r?"amountFrom":"amountTo",isNaN(d.toString(10))||(document.getElementById(m).value=d.toString(10)),r?this.setState({valueFrom:d}):this.setState({valueTo:d}),d}async estado(){let{tiempoPromediado:r,rapida:t}=this.state;const{contrato:a,accountAddress:o,tronWeb:n,t:m}=this.props;if(!a.ready)return;let d=D.normalizarNumero(await a.BRST_TRX_Proxy.RATE().call());this.setState({precioBrst:d}),a.BRST_TRX_Proxy.TRON_BALANCE().call().then(s=>{this.setState({enBrutus:D.normalizarNumero(s)})}),a.BRST_TRX_Proxy.TRON_PAY_BALANCE().call().then(s=>{this.setState({enPool:D.normalizarNumero(s)})}),a.BRST_TRX_Proxy.TRON_SOLICITADO().call().then(s=>{this.setState({solicitado:D.normalizarNumero(s)})}),a.BRST.totalSupply().call().then(s=>{this.setState({tokensEmitidos:D.normalizarNumero(s)})});let l=await a.BRST.balanceOf(o).call().then(s=>(s=D.normalizarNumero(s),this.setState({balanceBRST:s,misBRST:s}),s));a.USDT.balanceOf(o).call().then(s=>{this.setState({balanceUSDT:D.normalizarNumero(s)})}),a.USDD.balanceOf(o).call().then(s=>{this.setState({balanceUSDD:D.normalizarNumero(s,18)})}),this.consultaPrecio(),te===0&&(this.grafico(1e3,"day",90,"trx"),te++),parseInt(this.state.resultCalc)===1e3&&this.handleChangeCalc({target:{value:l}}),parseInt(document.getElementById("hold").value)===0&&(document.getElementById("hold").value=l);let c=await n.trx.getUnconfirmedBalance(o).catch(async s=>(console.log(s.toString()),await n.trx.getBalance(o)));c=c/10**6,this.setState({balanceTRX:c});let f=await n.trx.getAccountResources(o).catch(s=>(console.log(s.toString()),{})),y=parseInt(await a.BRST_TRX_Proxy_fast.descuentoRapido().call())/parseInt(await a.BRST_TRX_Proxy_fast.precision().call())*100;this.setState({penalty:y});let p=D.normalizarNumero((await a.loteria._premio().call())[0]),u=D.normalizarNumero(await a.BRST_TRX_Proxy_fast.balance_token_1().call());u=new x(u).minus(p),o!=="TZJSXstGQcCVT1PeVp7iybt5bANcU2bDda"&&(u=u.minus(2500)),u<0&&(u=new x(0)),this.setState({retiroRapido:u});let h=0;f.EnergyLimit&&(h=f.EnergyLimit),f.EnergyUsed&&(h-=f.EnergyUsed),this.setState({userEnergy:h});let j=65e3;c>=1&&(j=(await this.calculoEnergy(t)).dp(0).toNumber()),this.setState({eenergy:j});let k=(await this.costEnergy(j)).toString(10);this.setState({useTrx:k}),fetch(M.BRUTUS_API+"chartdata/brst?temporalidad=day&limite="+r).then(async s=>(await s.json()).Data).then(s=>{if(s.length>0){let b=s.reduce((O,V)=>O+V.value,0);b=new x(b/s.length).toNumber();let w=this.state.varBrst,i=1,A=1,X=2;s.length>=2&&(i=s[s.length-1].value,A=s[0].value,w=(A-i)/i,w=w/s.length,X=s.length);let L=(A/i)**(1/X)-1;const H=new x(L*365*100).dp(2).toString(10),W=new x((1+L)**365-1).multipliedBy(100).dp(2).toString(10);let Y=(1+w/100)**r;w=w*100,this.setState({promE7to1day:b,crecimientoPorcentual:w,crecimientoDiario:L,interesCompuesto:Y,APR:H,APY:W})}}).catch(s=>(console.error(s),!1)),fetch(M.BRUTUS_API+"chartdata/brst?temporalidad=day&limite=361").then(async s=>(await s.json()).Data).then(s=>{if(s.length>0){z=[];let b=[1,15,30,90,180,360];for(let w=0;w<b.length;w++)z.push({dias:b[w],trx:l*s[0].value-l*s[b[w]].value,diario:(l*s[0].value-l*s[b[w]].value)/b[w]});this.setState({dataBRST:s})}}).catch(s=>(console.error(s),[])),a.BRST_TRX_Proxy.MIN_DEPOSIT().call().then(s=>{this.setState({minCompra:D.normalizarNumero(s)})}),a.BRST.allowance(o,a.BRST_TRX_Proxy.address).call().then(s=>{this.setState({depositoBRUT:D.normalizarNumero(s)})}),fetch(M.BRUTUS_API+"precio/usdt").then(s=>s.json()).then(s=>{this.setState({precioUSDT:new x(s.Data.oneTron)})}).catch(s=>{console.log(s)}),fetch(M.BRUTUS_API+"precio/usdd").then(s=>s.json()).then(s=>{this.setState({precioUSDD:new x(s.Data.oneTron)})}).catch(s=>{console.log(s)});let g=await a.BRST_TRX_Proxy.todasSolicitudes(o).call(),F=[];for(let s=0;s<g.length;s++)F.push(parseInt(g[s]));let S=await a.BRST_TRX_Proxy.solicitudesPendientesGlobales().call();S=S[0];let P=[],E=parseInt(await a.BRST_TRX_Proxy.TIEMPO().call())*1e3,R=(E/(86400*1e3)).toPrecision(2),N=["TWVVi4x2QNhRJyhqa7qrwM4aSXnXoUDDwY","TWqsREyZUtPkBNrzSSCZ9tbzP3U5YUxppf","TB7RTxBPY4eMvKjceXj8SWjVnZCrWr4XvF"],T=new x(await n.trx.getBalance(a.BRST_TRX_Proxy.address)).shiftedBy(-6),_=new x(0);this.setState({espera:E,dias:R});let B=o===n.address.fromHex(await a.BRST_TRX_Proxy.owner().call()),v=!1;N.indexOf(o)>=0&&(v=!0),this.setState({isOwner:B,isAdmin:v});for(let s=0;s<S.length;s++){let b=await a.BRST_TRX_Proxy.verSolicitudPendiente(S[s]).call();b=b[0];let w=parseInt(b.tiempo)*1e3,i=new Date(w+E),A=((w+E-Date.now())/(86400*1e3)).toPrecision(2),X=e.jsx("b",{children:"login with an authorized account"}),L=new x(parseInt(b.brst)).times(parseInt(b.precio)).shiftedBy(-6);if(_=_.plus(L.dp(0)),F.includes(parseInt(S[s]))&&A>0&&(X=e.jsxs("button",{className:"btn btn-info ms-4 disabled",disabled:!0,"aria-disabled":"true",children:["Processing Unfreeze TRX "," ",e.jsx("i",{className:"bi bi-exclamation-circle"})]})),(F.includes(parseInt(S[s]))&&A<=0||B)&&(T.toNumber()<L.shiftedBy(-6).dp(6).toNumber()?X=e.jsxs("button",{className:"btn btn-info ms-4 disabled",disabled:!0,"aria-disabled":"true",children:[m("We continue to unfreeze TRX")+" "," ",e.jsx("i",{className:"bi bi-exclamation-circle"})]}):X=e.jsxs("button",{className:"btn btn-primary ms-4",onClick:async()=>{await this.preClaim(parseInt(S[s])),this.estado()},children:[m("claim")+" "," ",e.jsx("i",{className:"bi bi-award"})]})),A<=0&&(A=0),F.includes(parseInt(S[s]))||B||v){let H=e.jsx(e.Fragment,{});(B||v)&&(H=e.jsxs(e.Fragment,{children:[e.jsx("b",{children:"Wallet: "}),e.jsx("a",{target:"_blank",rel:"noopener noreferrer",href:"https://tronscan.org/#/address/"+n.address.fromHex(b.wallet),children:n.address.fromHex(b.wallet)}),e.jsx("br",{})]})),P[s]=e.jsxs("div",{className:"row mt-4",id:"sale-"+parseInt(S[s]),children:[e.jsx("div",{className:"col-12 mb-2",children:e.jsxs("h4",{className:"fs-20 text-black",children:[m("brst.sale",{number:parseInt(S[s])})," "," -> ",parseInt(b.brst)/10**6," BRST"]})}),e.jsx("div",{className:"col-sm-6 mb-2",children:e.jsxs("p",{className:"mb-0 fs-14",children:[H,e.jsx("b",{children:"Total: "}),L.shiftedBy(-6).dp(6).toString(10)," TRX",e.jsx("br",{}),e.jsx("b",{children:m("brst.price")})," ",parseInt(b.precio)/10**6," TRX",e.jsx("br",{}),e.jsx("b",{children:m("brst.available")})," ",i.toString()]})}),e.jsxs("div",{className:"col-sm-6 mb-2",children:[e.jsxs("p",{className:"mb-0 fs-14",children:[m("brst.unStaking",{days:A}),L.shiftedBy(-6).dp(6).toString(10)," TRX"]}),e.jsx("br",{}),X]}),e.jsx("div",{className:"col-12 mb-2",children:e.jsx("hr",{})})]},"glob"+parseInt(S[s]))}}_=_.shiftedBy(-6).toString(10);let I=e.jsxs(e.Fragment,{children:[e.jsx("input",{type:"text",id:"wallet",placeholder:"wallet to white list"}),e.jsx("button",{className:"btn btn-warning",onClick:async()=>{let s=[{type:"address",value:n.address.toHex(document.getElementById("wallet"))}],b="whiteList_add(address)";try{let w=await n.transactionBuilder.triggerSmartContract(n.address.toHex(a.BRST_TRX_Proxy_fast.address),b,{},s,n.address.toHex(o)),i=await n.transactionBuilder.extendExpiration(w.transaction,180);i=await window.tronLink.tronWeb.trx.sign(i),i=await n.trx.sendRawTransaction(i),console.log(i),alert("Transaction "+i.result+" hash: "+i.txid)}catch(w){console.log(w),alert(w.toString())}},children:"ADD"}),e.jsx("button",{className:"btn btn-danger",onClick:async()=>{let s=[{type:"address",value:n.address.toHex(document.getElementById("wallet"))}],b="whiteList_remove(address)";try{let w=await n.transactionBuilder.triggerSmartContract(n.address.toHex(a.BRST_TRX_Proxy_fast.address),b,{},s,n.address.toHex(o)),i=await n.transactionBuilder.extendExpiration(w.transaction,180);i=await window.tronLink.tronWeb.trx.sign(i),i=await n.trx.sendRawTransaction(i),console.log(i),alert("Transaction "+i.result+" hash: "+i.txid)}catch(w){console.log(w),alert(w.toString())}},children:"REMOVE"}),e.jsx("br",{}),"TRON_RR:"," ",D.normalizarNumero(await a.BRST_TRX_Proxy.TRON_RR().call()),e.jsx("br",{})]});this.setState({solicitudes:P.length}),(v||B)&&P.push(e.jsx("div",{children:B?I:e.jsx(e.Fragment,{})},"admin-panel")),P.push(e.jsxs("div",{children:["Balance Pool: ",T.toString(10)," trx"]},"balnce-panel")),this.setState({globDepositos:P,total_required:_});let C=!1,U=0;if(C=await fetch(M.BOT_URL).then(s=>s.json()).then(s=>s.available).catch(()=>!1),C){let s=await fetch(M.BOT_URL+"available").then(b=>b.json());s.av_energy.length>0&&(U=s.av_energy[0].available),U<s.total_energy_pool*.01?C=!1:C=!0}this.setState({energyOn:C})}async preClaim(r){let{userEnergy:t,energyOn:a}=this.state;const{tronWeb:o,contrato:n,accountAddress:m,t:d}=this.props;let l=0,c=[{type:"uint256",value:r}],f="retirar(uint256)";const y={};var p=await o.transactionBuilder.triggerConstantContract(o.address.toHex(n.BRST_TRX_Proxy.address),f,y,c,o.address.toHex(m)).catch(()=>({}));if(p.energy_used?l+=p.energy_used:l+=8e4,l>t&&a){let u=l-t;u<32e3?u=32e3:u+=1e3;let h={resource:"energy",amount:u,duration:"5min"},j=await fetch(M.BOT_URL+"prices",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(h)}).then(F=>F.json()),k=new x(j.price).dp(6),g=d("brst.alert.energy",{returnObjects:!0});this.setState({ModalTitulo:g[0],ModalBody:e.jsxs(e.Fragment,{children:[g[1]," ",e.jsxs("b",{children:[l," ",g[2]]}),g[3],e.jsxs("b",{children:[t," ",g[2]]})," ",g[4]," ",e.jsxs("b",{children:[u," ",g[2]]}),g[5],e.jsxs("b",{children:[k.toString(10)," TRX"]}),g[6],e.jsx("br",{}),e.jsx("br",{}),e.jsx("button",{type:"button",className:"btn btn-success",onClick:async()=>{if(await this.rentEnergy(u)){let F=[{type:"uint256",value:r}],S="retirar(uint256)";const P={};let E=await o.transactionBuilder.triggerSmartContract(o.address.toHex(n.BRST_TRX_Proxy.address),S,P,F,o.address.toHex(m)),R=await o.transactionBuilder.extendExpiration(E.transaction,180);R=await window.tronLink.tronWeb.trx.sign(R).catch(N=>{this.setState({ModalTitulo:"Error",ModalBody:N.toString()}),window.$("#mensaje-brst").modal("show")}),R=await o.trx.sendRawTransaction(R).then(()=>{this.setState({ModalTitulo:"Result",ModalBody:e.jsxs(e.Fragment,{children:["Retiro is Done ",R.txid,e.jsx("br",{}),e.jsx("br",{}),e.jsx("button",{type:"button",className:"btn btn-success",onClick:()=>{window.$("#mensaje-brst").modal("hide")},children:d("accept")})]})}),window.$("#mensaje-brst").modal("show")})}},children:g[7]})]})}),window.$("#mensaje-brst").modal("show")}else{let u=[{type:"uint256",value:r}],h="retirar(uint256)";const j={};let k=await o.transactionBuilder.triggerSmartContract(o.address.toHex(n.BRST_TRX_Proxy.address),h,j,u,o.address.toHex(m)),g=await o.transactionBuilder.extendExpiration(k.transaction,180);g=await window.tronLink.tronWeb.trx.sign(g).catch(F=>{this.setState({ModalTitulo:"Error",ModalBody:F.toString()}),window.$("#mensaje-brst").modal("show")}),g=await o.trx.sendRawTransaction(g).then(()=>{this.setState({ModalTitulo:"Result",ModalBody:e.jsxs(e.Fragment,{children:["Retiro is Done ",g.txid,e.jsx("br",{}),e.jsx("br",{}),e.jsx("button",{type:"button",className:"btn btn-success",onClick:()=>{window.$("#mensaje-brst").modal("hide")},children:d("accept")})]})}),window.$("#mensaje-brst").modal("show")})}}subeobaja(r){var t=e.jsxs("svg",{width:"29",height:"22",viewBox:"0 0 29 22",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("g",{filter:"url(#filter0_d2)",children:e.jsx("path",{d:"M5 16C5.91797 14.9157 8.89728 11.7277 10.5 10L16.5 13L23.5 4",stroke:"#2BC155",strokeWidth:"2",strokeLinecap:"round"})}),e.jsx("defs",{children:e.jsxs("filter",{id:"filter0_d2",x:"-3.05176e-05",y:"-6.10352e-05",width:"28.5001",height:"22.0001",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[e.jsx("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),e.jsx("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"}),e.jsx("feOffset",{dy:"1"}),e.jsx("feGaussianBlur",{stdDeviation:"2"}),e.jsx("feColorMatrix",{type:"matrix",values:"0 0 0 0 0.172549 0 0 0 0 0.72549 0 0 0 0 0.337255 0 0 0 0.61 0"}),e.jsx("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow"}),e.jsx("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow",result:"shape"})]})})]}),a=e.jsxs("svg",{width:"29",height:"22",viewBox:"0 0 29 22",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("g",{filter:"url(#filter0_d)",children:e.jsx("path",{d:"M5 4C5.91797 5.08433 8.89728 8.27228 10.5 10L16.5 7L23.5 16",stroke:"#FF2E2E",strokeWidth:"2",strokeLinecap:"round"})}),e.jsx("defs",{children:e.jsxs("filter",{id:"filter0_d",x:"0",y:"0",width:"28.5001",height:"22.0001",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[e.jsx("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),e.jsx("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"}),e.jsx("feOffset",{dy:"1"}),e.jsx("feGaussianBlur",{stdDeviation:"2"}),e.jsx("feColorMatrix",{type:"matrix",values:"0 0 0 0 1 0 0 0 0 0.180392 0 0 0 0 0.180392 0 0 0 0.61 0"}),e.jsx("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow"}),e.jsx("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow",result:"shape"})]})})]}),o=t;return r<0&&(o=a),o}textoE(r){var t="success";return r<0&&(t="danger"),t}async consultaPrecio(){return await fetch(M.BRUTUS_API+"precio/brst").then(async r=>(await r.json()).Data).then(r=>(this.setState({varBrst:r.v24h}),r)).catch(r=>(console.log(r),0))}llenarBRST(){document.getElementById("amountTo").value=this.state.balanceBRST}llenarTRX(){document.getElementById("amountFrom").value=this.state.balanceTRX}async calculoEnergy(r=!1){let t=document.getElementById("currencySelectFrom").value,a=document.getElementById("currencySelectTo").value,{userEnergy:o}=this.state;const{tronWeb:n,accountAddress:m,contrato:d}=this.props;function l(y){let p="T9yD14Nj9j7xAB4dbGeiX9h8unkKHxuWwb";switch(y){case"usdt":p="TR7NHqjeKQxGTCi8q8ZY4pL8otSzgjLj6t";break;case"usdd":p="TXDk8mbtRbXeYuMNS83CfKPaYYT8XWv9Hz";break;default:p=!1;break}return p}let c=new x(0),f=l(t);if(f){let y=function(T,_){let B=new Array(_.length).fill(0),v=T;for(let C=0;C<_.length&&v>0;C++)B[C]=1,v--;let I=0;for(;v>0;)B[I]++,v--,I=(I+1)%_.length;return B},p="TCFNp179Lg46D16zKoumd4Poa2WFFdtqYj";const u={method:"POST",headers:{accept:"application/json","content-type":"application/json"},body:JSON.stringify({value:p,visible:!0})};let h=await fetch("https://api.trongrid.io/wallet/getcontract",u).then(T=>T.json()).catch(T=>(console.error(T),{}));h.consume_user_resource_percent?h=h.consume_user_resource_percent/100:h=1;let j=n.contract(D.abi_TOKEN,f),k=parseInt(await j.decimals().call()),g=await j.allowance(m,p).call();if(g.remaining&&(g=g.remaining),g=parseInt(g),g<=1*1e6){let T=[{type:"address",value:n.address.toHex(p)},{type:"uint256",value:"115792089237316195423570985008687907853269984665640564039457584007913129639935"}],_="approve(address,uint256)";const B={};let v=await n.transactionBuilder.triggerConstantContract(n.address.toHex(f),_,B,T,n.address.toHex(m)).catch(()=>({}));v.energy_used&&(c=c.plus(v.energy_used))}let F=new x(1).shiftedBy(k).dp(0).toString(10),S=await fetch("https://rot.endjgfsv.link/swap/router?fromToken="+f+"&toToken=T9yD14Nj9j7xAB4dbGeiX9h8unkKHxuWwb&amountIn="+F+"&typeList=SUNSWAP_V3,SUNSWAP_V2,WTRX").then(T=>T.json()).then(T=>T.data[0]),P=[{type:"address[]",value:S.tokens},{type:"string[]",value:S.poolVersions},{type:"uint256[]",value:y(S.tokens.length,S.poolVersions)},{type:"uint24[]",value:S.poolFees},{type:"(uint256,uint256,address,uint256)",value:[new x(S.amountIn).shiftedBy(k).dp(0).toString(10),new x(S.amountOut).times(.995).shiftedBy(6).dp(0).toString(10),n.address.toHex(m).replace(/41/g,"0x"),(parseInt(Date.now()/1e3)+100).toString(10)]}],E="swapExactInput(address[],string[],uint256[],uint24[],(uint256,uint256,address,uint256))";const R={feeLimit:1e4*1e6,callValue:0};let N=await n.transactionBuilder.triggerConstantContract(n.address.toHex(p),E,R,P,n.address.toHex(m)).catch(()=>({}));N.energy_used&&(c=c.plus(N.energy_used*h))}if(a==="brst"){let y=[],p="staking()";const u={callValue:1e6};let h=await n.transactionBuilder.triggerConstantContract(n.address.toHex(d.BRST_TRX_Proxy.address),p,u,y,n.address.toHex(m)).catch(()=>({}));h.energy_used&&(c=c.plus(h.energy_used))}else{let y=[{type:"uint256",value:"1000000"}],p=d.BRST_TRX_Proxy.address;r&&(p=d.BRST_TRX_Proxy_fast.address);let u="esperaRetiro(uint256)";r&&(u="sell_token_2(uint256)");const h={};let j=await n.transactionBuilder.triggerConstantContract(n.address.toHex(p),u,h,y,n.address.toHex(m)).catch(()=>({}));j.energy_used&&(console.log("retiro ",j.energy_used,j),c=c.plus(j.energy_used))}return c=c.plus(1e3),console.log("necesary ",c.toString(10)),c=c.minus(o),console.log("requerido ",c.toString(10)),c.toNumber()<=0?c=new x(0):c.toNumber()<32e3&&(c=new x(32e3)),console.log("send ",c.toString(10)),c}async costEnergy(r){if(r=new x(r).dp(0),r.toNumber()===0)return new x(0);let t=await fetch(M.BOT_URL+"prices",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({resource:"energy",amount:r.toString(10),duration:"5min"})}).then(o=>o.json()).catch(o=>(console.log(o),!1));if(!t)return!1;let a=new x(t.price).dp(6);return this.setState({useTrx:a.toString(10)}),a}async rentEnergy(r){x.isBigNumber(r)||(r=new x(r)),r=r.dp(0).toNumber();const{tronWeb:t,accountAddress:a,t:o}=this.props;let{energyOn:n}=this.state;if(!n)return!1;if(r<=0)return!0;r<32e3&&(r=32e3),this.setState({ModalTitulo:e.jsxs(e.Fragment,{children:["Transaction Alert ",$]}),ModalBody:e.jsx(e.Fragment,{children:"sign the following transaction if you agree to pay for the energy lease."})}),window.$("#mensaje-brst").modal("show");let m=!1,d=await this.costEnergy(r);if(!d)return!1;const l=await t.transactionBuilder.sendTrx(M.WALLET_API,t.toSun(d),a),c=await window.tronWeb.trx.sign(l).catch(y=>(this.setState({ModalTitulo:"Transaction failed",ModalBody:e.jsxs(e.Fragment,{children:[y.toString(),e.jsx("br",{}),e.jsx("br",{}),e.jsx("button",{type:"button",className:"btn btn-danger",onClick:()=>{window.$("#mensaje-brst").modal("hide")},children:"Close"})]})}),window.$("#mensaje-brst").modal("show"),!1));if(!c)return!1;this.setState({ModalTitulo:e.jsxs(e.Fragment,{children:["Processing your order ",$]}),ModalBody:e.jsx(e.Fragment,{children:"One of our robots is going to pick up your energy to deliver it to you as soon as possible, this will not take long please wait."})}),window.$("#mensaje-brst").modal("show");let f=await D.rentResource(a,"energy",r,"5","min",d,c);return f.result?(this.setState({ModalTitulo:o("brst.alert.done",{returnObjects:!0})[0],ModalBody:e.jsxs(e.Fragment,{children:[o("brst.alert.done",{returnObjects:!0})[1],e.jsx("br",{}),e.jsx("button",{type:"button","data-bs-dismiss":"modal",className:"btn btn-success",children:o("brst.alert.done",{returnObjects:!0})[2]})]})}),window.$("#mensaje-brst").modal("show"),m=!0):(this.setState({ModalTitulo:o("brst.alert.error",{returnObjects:!0})[0],ModalBody:o("brst.alert.error",{returnObjects:!0,hash:f.hash,msg:f.msg})[1]}),window.$("#mensaje-brst").modal("show")),m}async preExchange(r=!1){let{userEnergy:t}=this.state,a=(await this.calculoEnergy(r)).dp(0),o=await this.costEnergy(a);console.log(a.toString(10)),a.toNumber()>0?(this.setState({ModalTitulo:"Energy Notice",ModalBody:e.jsxs(e.Fragment,{children:["This operation requires"," ",e.jsxs("b",{children:[a.plus(t).dp(0).toNumber().toLocaleString("en-US")," ","energy"]}),e.jsx("br",{}),e.jsx("br",{}),"you have ",e.jsxs("b",{children:[t.toLocaleString("en-US")," energy"]}),e.jsx("br",{}),"Rent ",e.jsxs("b",{children:[a.toNumber().toLocaleString("en-US")," energy"]})," for ",e.jsxs("b",{children:[o.toString(10)," TRX"]}),e.jsx("br",{}),e.jsx("br",{}),e.jsxs("button",{type:"button",className:"btn btn-success",onClick:async()=>{await this.rentEnergy(a)&&this.exchangeTokens(r)},children:["Rent Energy"," "]}),e.jsxs("button",{type:"button",className:"btn btn-danger",onClick:async()=>{this.exchangeTokens(r)},children:["Proceed without renting energy"," "]})]})}),window.$("#mensaje-brst").modal("show")):this.exchangeTokens(r)}async exchangeTokens(r=!1){let t=document.getElementById("currencySelectFrom").value,a=document.getElementById("currencySelectTo").value;switch(t+"_"+a){case"usdt_brst":this.suawpTokenFromTRX(0);break;case"usdd_brst":this.suawpTokenFromTRX(1);break;case"brst_trx":this.venta(r);break;default:this.compra();break}}async suawpTokenFromTRX(r=0){const{tronWeb:t,accountAddress:a,t:o}=this.props;let{precioUSDT:n,precioUSDD:m}=this.state,d=r===0?"TR7NHqjeKQxGTCi8q8ZY4pL8otSzgjLj6t":"TXDk8mbtRbXeYuMNS83CfKPaYYT8XWv9Hz",l=r===0?n:m,c="TCFNp179Lg46D16zKoumd4Poa2WFFdtqYj",f=t.contract(D.abi_SUNSWAP,c),y=t.contract(D.abi_TOKEN,d),p=parseInt(await y.decimals().call()),u=new x(parseInt(await y.balanceOf(a).call())).shiftedBy(-p),h=document.getElementById("amountFrom").value;if(h=h.replace(/,/g,"."),h=new x(h),u.dp(2).toNumber()<1||h.toNumber()>u.toNumber())return this.setState({ModalTitulo:"ALERT",ModalBody:e.jsxs(e.Fragment,{children:["Sorry, you don't have enough"," ",await y.name().call()," to complete this operation."]})}),window.$("#mensaje-brst").modal("show"),"false";let j=await y.allowance(a,c).call();if(j.remaining&&(j=j.remaining),j=parseInt(j),j<=u.toNumber()){this.setState({ModalTitulo:e.jsxs(e.Fragment,{children:["Token Alert ",$]}),ModalBody:e.jsx(e.Fragment,{children:"Approve unlimited future exchanges"})}),window.$("#mensaje-brst").modal("show");let N=[{type:"address",value:t.address.toHex(c)},{type:"uint256",value:"115792089237316195423570985008687907853269984665640564039457584007913129639935"}],T="approve(address,uint256)";const _={};let B=await t.transactionBuilder.triggerSmartContract(t.address.toHex(y.address),T,_,N,t.address.toHex(a)),v=await t.transactionBuilder.extendExpiration(B.transaction,180);if(v=await window.tronLink.tronWeb.trx.sign(v).catch(I=>(this.setState({ModalTitulo:o("brst.alert.nonEfective",{returnObjects:!0})[0],ModalBody:o("brst.alert.nonEfective",{returnObjects:!0})[1]+" | "+I.toString()}),window.$("#mensaje-brst").modal("show"),!1)),!v||(v=await t.trx.sendRawTransaction(v).then(()=>(this.setState({ModalTitulo:e.jsxs(e.Fragment,{children:["Token Alert ",$]}),ModalBody:e.jsx(e.Fragment,{children:"Approval done, continue the process"})}),window.$("#mensaje-brst").modal("show"),!0)).catch(I=>(this.setState({ModalTitulo:e.jsxs(e.Fragment,{children:["Error",$]}),ModalBody:e.jsx(e.Fragment,{children:I.toString()})}),window.$("#mensaje-brst").modal("show"),!1)),!v))return}let k=await fetch("https://rot.endjgfsv.link/swap/router?fromToken="+d+"&toToken=T9yD14Nj9j7xAB4dbGeiX9h8unkKHxuWwb&amountIn="+h.shiftedBy(p).dp(0).toString(10)+"&typeList=SUNSWAP_V3,SUNSWAP_V2,WTRX").then(N=>N.json()).then(N=>N.data[0]);function g(N,T){let _=new Array(T.length).fill(0),B=N;for(let I=0;I<T.length&&B>0;I++)_[I]=1,B--;let v=0;for(;B>0;)_[v]++,B--,v=(v+1)%T.length;return _}let F=[{type:"address[]",value:k.tokens},{type:"string[]",value:k.poolVersions},{type:"uint256[]",value:g(k.tokens.length,k.poolVersions)},{type:"uint24[]",value:k.poolFees},{type:"(uint256,uint256,address,uint256)",value:[new x(k.amountIn).shiftedBy(p).dp(0).toString(10),new x(k.amountOut).times(.995).shiftedBy(6).dp(0).toString(10),t.address.toHex(a).replace(/41/g,"0x"),(parseInt(Date.now()/1e3)+100).toString(10)]}],S="swapExactInput(address[],string[],uint256[],uint24[],(uint256,uint256,address,uint256))";const P={feeLimit:1e4*1e6,callValue:0};let E=await t.transactionBuilder.triggerSmartContract(t.address.toHex(f.address),S,P,F,t.address.toHex(a)),R=await t.transactionBuilder.extendExpiration(E.transaction,180);R=await window.tronLink.tronWeb.trx.sign(R).catch(N=>(this.setState({ModalTitulo:o("brst.alert.nonEfective",{returnObjects:!0})[0],ModalBody:o("brst.alert.nonEfective",{returnObjects:!0})[1]+" | "+N.toString()}),window.$("#mensaje-brst").modal("show"),!1)),R&&(R=await t.trx.sendRawTransaction(R).then(()=>{this.setState({ModalTitulo:e.jsxs(e.Fragment,{children:["Swap Alert ",$]}),ModalBody:e.jsx(e.Fragment,{children:"Swap done, continue the process"})}),window.$("#mensaje-brst").modal("show")}),await D.delay(3),this.compra(h.div(l)))}async compra(r=new x(0)){const{tronWeb:t,contrato:a,accountAddress:o,t:n}=this.props;if(r.toNumber()<=0&&(r=parseFloat(document.getElementById("amountFrom").value),r=new x(r)),r=r.shiftedBy(6).dp(0).toNumber(),r<=0){this.setState({ModalTitulo:n("brst.alert.errorInput",{returnObjects:!0})[0],ModalBody:e.jsxs(e.Fragment,{children:[n("brst.alert.errorInput",{returnObjects:!0})[1],e.jsx("br",{}),e.jsx("br",{}),e.jsx("button",{type:"button",className:"btn btn-danger",onClick:()=>{window.$("#mensaje-brst").modal("hide")},children:n("close")})]})});return}const{minCompra:m}=this.state;if(await t.trx.getUnconfirmedBalance()>=r)if(r>=m){let l=[],c="staking()";const f={callValue:r};let y=await t.transactionBuilder.triggerSmartContract(t.address.toHex(a.BRST_TRX_Proxy.address),c,f,l,t.address.toHex(o)),p=await t.transactionBuilder.extendExpiration(y.transaction,180);if(p=await window.tronLink.tronWeb.trx.sign(p).catch(u=>(this.setState({ModalTitulo:n("brst.alert.nonEfective",{returnObjects:!0})[0],ModalBody:n("brst.alert.nonEfective",{returnObjects:!0})[1]+" | "+u.toString()}),window.$("#mensaje-brst").modal("show"),!1)),!p)return;p=await t.trx.sendRawTransaction(p).then(u=>{if(u.result)this.setState({ModalTitulo:n("brst.alert.compra",{returnObjects:!0})[0],ModalBody:e.jsxs(e.Fragment,{children:[n("brst.alert.compra",{returnObjects:!0})[1],e.jsx("br",{}),e.jsx("br",{}),e.jsx("button",{type:"button",className:"btn btn-success",onClick:()=>{window.$("#mensaje-brst").modal("hide")},children:n("accept")})]})}),window.$("#mensaje-brst").modal("show");else return this.setState({ModalTitulo:n("brst.alert.nonEfective",{returnObjects:!0})[0],ModalBody:n("brst.alert.nonEfective",{returnObjects:!0})[1]+" | "+u.transaction.txID.toString()}),window.$("#mensaje-brst").modal("show"),!1}).catch(u=>(this.setState({ModalTitulo:n("brst.alert.nonEfective",{returnObjects:!0})[0],ModalBody:n("brst.alert.nonEfective",{returnObjects:!0})[1]+" | "+u.toString()}),window.$("#mensaje-brst").modal("show"),!1))}else document.getElementById("amountFrom").value=m,this.setState({ModalTitulo:n("error"),ModalBody:n("brst.alert.errGreater",{returnObjects:!0,min:m})[0]}),window.$("#mensaje-brst").modal("show");else document.getElementById("amountFrom").value="",this.setState({ModalTitulo:n("error"),ModalBody:n("brst.alert.errFunds",{returnObjects:!0,min:m})[0]}),window.$("#mensaje-brst").modal("show");await D.delay(5),this.estado()}async venta(r){const{t}=this.props,{minventa:a}=this.state;let o=document.getElementById("amountFrom").value;o=o.replace(/,/g,"."),o=new x(o).shiftedBy(6);let{accountAddress:n,contrato:m,tronWeb:d}=this.props,l=d.address.toHex(m.BRST_TRX_Proxy.address);r&&(l=d.address.toHex(m.BRST_TRX_Proxy_fast.address));let c=await m.BRST.allowance(n,l).call();if(c=parseInt(c),c<=o.toNumber()){this.setState({ModalTitulo:e.jsx(e.Fragment,{children:"BRST Aproval"}),ModalBody:e.jsx(e.Fragment,{children:"sign the following transaction to confirm Token Aproval"})}),window.$("#mensaje-brst").modal("show");let f=[{type:"address",value:l},{type:"uint256",value:"115792089237316195423570985008687907853269984665640564039457584007913129639935"}],y="approve(address,uint256)";const p={};let u=await d.transactionBuilder.triggerSmartContract(d.address.toHex(m.BRST.address),y,p,f,d.address.toHex(n)),h=await d.transactionBuilder.extendExpiration(u.transaction,180);h=await window.tronLink.tronWeb.trx.sign(h).catch(j=>{this.setState({ModalTitulo:"Error",ModalBody:j.toString()}),window.$("#mensaje-brst").modal("show")}),h=await d.trx.sendRawTransaction(h).then(()=>{this.setState({ModalTitulo:e.jsx(e.Fragment,{children:"Result"}),ModalBody:e.jsxs(e.Fragment,{children:["BRST Aproval is Done ",h.txid]})}),window.$("#mensaje-brst").modal("show")}),c=await m.BRST.allowance(n,l).call(),c=parseInt(c)}if(c>=o.toNumber())if(o.toNumber()>=a){this.setState({ModalTitulo:e.jsxs(e.Fragment,{children:["Withdrawal process ",$]}),ModalBody:e.jsx(e.Fragment,{children:"sign the following transaction to confirm your withdrawal."})}),window.$("#mensaje-brst").modal("show");let f=[{type:"uint256",value:o.toString(10)}],y="esperaRetiro(uint256)";r&&(y="sell_token_2(uint256)");const p={};let u=await d.transactionBuilder.triggerSmartContract(l,y,p,f,d.address.toHex(n)),h=await d.transactionBuilder.extendExpiration(u.transaction,180);h=await window.tronLink.tronWeb.trx.sign(h).catch(j=>{this.setState({ModalTitulo:"Error",ModalBody:j.toString()}),window.$("#mensaje-brst").modal("show")}),h=await d.trx.sendRawTransaction(h).then(()=>{this.setState({ModalTitulo:"Operation result",ModalBody:e.jsxs(e.Fragment,{children:["Your withdrawal was successfully processed"," ",e.jsx("a",{href:"https://tronscan.org/#/transaction/"+h.txid,rel:"noreferrer noopener",target:"_blank",children:h.txid}),e.jsx("br",{}),e.jsx("br",{}),e.jsx("button",{type:"button",className:"btn btn-success",onClick:()=>{window.$("#mensaje-brst").modal("hide")},children:t("accept")})]})}),window.$("#mensaje-brst").modal("show")}),r||document.getElementById("request-brst").scrollIntoView()}else this.setState({ModalTitulo:"Info",ModalBody:`Enter a value greater than ${a} BRST`}),window.$("#mensaje-brst").modal("show"),document.getElementById("amountFrom").value=a;else o>c?c<=0?(this.setState({ModalTitulo:"Info",ModalBody:"You do not have enough aproved funds in your account you place at least "+a+" BRST"}),window.$("#mensaje-brst").modal("show")):(this.setState({ModalTitulo:"Info",ModalBody:"You must leave 21 TRX free in your account to make the transaction"}),window.$("#mensaje-brst").modal("show")):(this.setState({ModalTitulo:"Info",ModalBody:"You must leave 21 TRX free in your account to make the transaction"}),window.$("#mensaje-brst").modal("show")),document.getElementById("amountFrom").value=a;this.estado()}async grafico(r,t,a,o){let{precioBrst:n,precioUSDT:m,precioUSDD:d}=this.state;if(!document.getElementById("chartdiv-brst"))return;this.root&&this.root.dispose();const l=ne.new("chartdiv-brst");l._logo.dispose(),l.setThemes([ie.new(l)]);let c=l.container.children.push(oe.new(l,{panX:!0,panY:!0,wheelX:"panX",wheelY:"zoomX",pinchZoomX:!0}));c.set("cursor",le.new(l,{behavior:"none"})).lineY.set("visible",!1);let y=l.interfaceColors.get("negative"),p=l.interfaceColors.get("positive"),u=0,h,j;function k(C,U){let s=C.value;if(U){let i=C.valor_alt.find(A=>A.coin===U);i?s=i.valor:s=0}let b=y;s>=u&&(b=p),u=s;let w={date:C.date,value:s,color:b};return b!==h&&(j||(j=w),j.strokeSettings={stroke:b}),j=w,h=b,w}let g=n;switch(o){case"usdt":g=g*m;break;case"usdd":g=g*d;break;default:o=!1;break}let F={date:Date.now(),value:g};async function S(C){let U=await fetch(M.BRUTUS_API+"chartdata/brst?temporalidad="+t+"&limite="+C).then(async b=>(await b.json()).Data).catch(()=>!1);if(U){u=0,h="",j="";let b=[];for(var s=U.length-1;s>=0;--s)b.push(k(U[s],o));return b.push(F),b}else return!1}let P=c.xAxes.push(G.new(l,{baseInterval:{timeUnit:t,count:1},renderer:Z.new(l,{}),tooltip:K.new(l,{})})),E=c.yAxes.push(J.new(l,{renderer:Q.new(l,{})})),R=c.series.push(ee.new(l,{name:"Series",xAxis:P,yAxis:E,valueYField:"value",valueXField:"date"}));R.strokes.template.set("templateField","strokeSettings");let N=R.set("tooltip",K.new(l,{labelText:"{valueY}"}));N.on("pointTo",function(){let C=N.get("background");C.set("fill",C.get("fill"))}),N.get("background").adapters.add("fill",function(C){return N.dataItem?N.dataItem.dataContext.color:C});let T=c.set("scrollbarX",de.new(l,{orientation:"horizontal",height:40})),_=T.chart.xAxes.push(G.new(l,{baseInterval:{timeUnit:t,count:1},renderer:Z.new(l,{})})),B=T.chart.yAxes.push(J.new(l,{renderer:Q.new(l,{})})),v=T.chart.series.push(ee.new(l,{valueYField:"value",valueXField:"date",xAxis:_,yAxis:B})),I=await S(a);I&&(R.data.setAll(I),v.data.setAll(I)),R.appear(r),c.appear(r,r/10),this.root=l}render(){const{contrato:r,t}=this.props;let{APR:a,APY:o,from:n,to:m,valueFrom:d,precioBrst:l,varBrst:c,minCompra:f,minventa:y,days:p,diasCalc:u,temporalidad:h,cantidadDatos:j,tiempoPromediado:k,solicitudes:g,globDepositos:F,crecimientoPorcentual:S,userEnergy:P,rapida:E,penalty:R,retiroRapido:N,dias:T,balanceUSDT:_,balanceUSDD:B,balanceBRST:v,balanceTRX:I,valueTo:C}=this.state;f="Min. "+f+" "+n.toUpperCase(),y="Min. "+y+" "+m.toUpperCase();let U;h==="hour"?U=ue:U=he;let s=e.jsx(e.Fragment,{});n+"_"+m=="brst_trx"&&(s=e.jsx("div",{className:"row mb-3",children:e.jsxs("div",{className:"col-12 text-center",children:[e.jsx("input",{type:"checkbox",checked:E,readOnly:!0,onClick:()=>{this.setState({rapida:!E})},style:{cursor:"pointer"}})," ",e.jsx("b",{children:"Quick:"})," request up to"," ",e.jsxs("b",{children:[N.dp(1).toString(10)," TRX"]})," with a"," ",e.jsxs("b",{children:[R,"% fee."]}),e.jsx("br",{}),e.jsx("input",{type:"checkbox",checked:!E,readOnly:!0,onClick:()=>{this.setState({rapida:!E})},style:{cursor:"pointer"}})," ",e.jsx("b",{children:"Regular:"})," request the ",e.jsx("b",{children:"total"})," with a ",e.jsxs("b",{children:[T," days"]})," ","waiting period."]})}));let b=e.jsxs("button",{className:"btn btn-success",style:{width:"100%"},onClick:()=>this.preExchange(E),children:["Swap ",n.toUpperCase()+" -> "+m.toUpperCase()]});m==="trx"&&E&&N.toNumber()<C.toNumber()&&(b=e.jsx("button",{className:"btn btn-warning",style:{width:"100%"},children:"Enter a lower amount or change to regular withdrawal"})),d.toNumber()<1&&(b=e.jsxs("button",{className:"btn btn-warning",style:{width:"100%"},children:["The minimum to operate is ",1," ",n.toUpperCase()]}));let w=I;switch(n){case"usdt":w=_;break;case"usdd":w=B;break;case"brst":w=v;break}return d.toNumber()>w&&(b=e.jsxs("button",{className:"btn btn-danger",style:{width:"100%"},children:["Not enough ",n.toUpperCase()," top up to proceed"]})),e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-xl-12",children:e.jsx("div",{className:"tab-content",id:"nav-tabContent",children:e.jsx("div",{className:"tab-pane fade show active",id:"nav-bitcoin",role:"tabpanel","aria-labelledby":"nav-bitcoin-tab",children:e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-xl-9 col-xxl-9 wow fadeInLeft","data-wow-delay":"0.2s",children:e.jsxs("div",{className:"card coin-content",children:[e.jsxs("div",{className:"card-header border-0 flex-wrap",children:[e.jsxs("div",{className:"mb-2",children:[e.jsx("h4",{className:"heading m-0",children:t("tokenChart",{token:"BRST"})}),e.jsx("span",{className:"fs-16",children:"Brutus Tron Staking "})]}),e.jsx("div",{className:"dropdown bootstrap-select",children:e.jsxs("select",{className:"image-select default-select dashboard-select",id:"selector","aria-label":"Default",tabIndex:"0",style:{background:"rgb(3 0 8 / 20%)"},onInput:i=>{console.log(i.target.value),this.grafico(500,h,j,document.getElementById("selector").value)},children:[e.jsx("option",{value:"trx",children:"TRX (Tron)"}),e.jsx("option",{value:"usdd",children:"USDD (Decentralized USD)"}),e.jsx("option",{value:"usdt",children:"USDâ‚® (Tether)"})]})})]}),e.jsxs("div",{className:"card-body",children:[e.jsx("div",{className:"d-flex align-items-center justify-content-between flex-wrap",children:e.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap",children:[e.jsxs("div",{className:"price-content",children:[e.jsx("span",{className:"fs-18 d-block mb-2",children:t("price")}),e.jsxs("h4",{className:"fs-20 font-w600",children:[l," TRX"]})]}),e.jsxs("div",{className:"price-content",children:[e.jsx("span",{className:"fs-14 d-block mb-2",children:"24h% change"}),e.jsxs("h4",{className:"font-w600 text-success",children:[c.toFixed(4),e.jsx("i",{className:"fa-solid fa-caret-up ms-1 text-success"})]})]}),e.jsxs("div",{className:"price-content",children:[e.jsx("span",{className:"fs-14 d-block mb-2",children:t("circulating")}),e.jsxs("h4",{className:"font-w600",children:[(this.state.tokensEmitidos*1).toFixed(2)," ","BRST"]})]}),e.jsxs("div",{className:"price-content",children:[e.jsx("span",{className:"fs-14 d-block mb-2",children:t("endorse")}),e.jsxs("h4",{className:"font-w600",children:[(this.state.enBrutus*1).toFixed(2)," TRX"]})]})]})}),e.jsx("div",{className:"mb-3",id:"chartdiv-brst",style:{height:"400px",backgroundColor:"white"}}),e.jsx("select",{className:"btn-secondary style-1 default-select",style:{backgroundColor:"white"},value:this.state.cantidadDatos,onChange:this.handleChange2,children:U.map(i=>e.jsx("option",{value:i.value,children:i.label},i.label.toString()))})," | ",e.jsx("select",{className:"btn-secondary style-1 default-select",style:{backgroundColor:"white"},value:this.state.temporalidad,onChange:this.handleChange,children:ce.map(i=>e.jsx("option",{value:i.value,children:i.label},i.label.toString()))})]})]})}),e.jsx("div",{className:"col-xl-3 col-xxl-3 col-sm-6 wow fadeInRight","data-wow-delay":"0.3s",children:e.jsxs("div",{className:"card digital-cash",children:[e.jsx("div",{className:"card-body",children:e.jsx("div",{className:"text-center",children:e.jsxs("div",{className:"media d-block",children:[e.jsx("img",{onClick:()=>{const{tronWeb:i,accountAddress:A}=this.props;this.setState({ModalTitulo:t("brst.alert.donate",{returnObjects:!0})[0],ModalBody:e.jsxs(e.Fragment,{children:["TRX:",e.jsx("input",{type:"number",id:"trxD",className:"form-control mb-3",placeholder:"Amount"}),e.jsx("button",{type:"button",className:"btn btn-success w-100 mb-3",onClick:async()=>{let X=document.getElementById("trxD").value;X=new x(X).shiftedBy(6).dp(0);let L=[],H="donate()";const W={callValue:X};let Y=await i.transactionBuilder.triggerSmartContract(i.address.toHex(r.BRST_TRX_Proxy.address),H,W,L,i.address.toHex(A)),O=await i.transactionBuilder.extendExpiration(Y.transaction,180);O=await window.tronLink.tronWeb.trx.sign(O).catch(V=>(this.setState({ModalTitulo:t("brst.alert.nonEfective",{returnObjects:!0})[0],ModalBody:t("brst.alert.nonEfective",{returnObjects:!0})[1]+" | "+V.toString()}),window.$("#mensaje-brst").modal("show"),!1)),O&&(O=await i.trx.sendRawTransaction(O).then(()=>{this.setState({ModalTitulo:t("brst.donate.title",{returnObjects:!0})[0],ModalBody:e.jsxs(e.Fragment,{children:[t("brst.donate.body",{returnObjects:!0})[1],e.jsx("br",{}),e.jsx("br",{}),e.jsx("button",{type:"button",className:"btn btn-success",onClick:()=>{window.$("#mensaje-brst").modal("hide")},children:t("accept")})]})}),window.$("#mensaje-brst").modal("show")}))},children:t("brst.alert.donate",{returnObjects:!0})[3]}),"BRST",e.jsx("input",{type:"number",id:"brstD",className:"form-control mb-3",placeholder:"Amount"}),e.jsx("button",{type:"button",className:"btn btn-success w-100 mb-3",onClick:async()=>{let X=document.getElementById("brstD").value;X=new x(X).shiftedBy(6).dp(0);let L=[{type:"uint256",value:X}],H="donate(uint256)";const W={};let Y=await i.transactionBuilder.triggerSmartContract(i.address.toHex(r.BRST_TRX_Proxy.address),H,W,L,i.address.toHex(A)),O=await i.transactionBuilder.extendExpiration(Y.transaction,180);O=await window.tronLink.tronWeb.trx.sign(O).catch(V=>(this.setState({ModalTitulo:t("brst.alert.nonEfective",{returnObjects:!0})[0],ModalBody:t("brst.alert.nonEfective",{returnObjects:!0})[1]+" | "+V.toString()}),window.$("#mensaje-brst").modal("show"),!1)),O&&(O=await i.trx.sendRawTransaction(O).then(()=>{this.setState({ModalTitulo:t("brst.donate.title",{returnObjects:!0})[0],ModalBody:e.jsxs(e.Fragment,{children:[t("brst.donate.body",{returnObjects:!0})[1],e.jsx("br",{}),e.jsx("br",{}),e.jsx("button",{type:"button",className:"btn btn-success",onClick:()=>{window.$("#mensaje-brst").modal("hide")},children:t("accept")})]})}),window.$("#mensaje-brst").modal("show")}))},children:t("brst.alert.donate",{returnObjects:!0})[3]})]})}),window.$("#mensaje-brst").modal("show")},src:"images/brst.png",width:"100%",alt:"brutus tron staking"}),e.jsxs("div",{className:"media-content",children:[e.jsx("h4",{className:"mt-0 mt-md-4 fs-20 font-w700 text-black mb-0",children:t("brst.aStaking")}),e.jsx("span",{className:"font-w600 text-black",children:"Brutus"}),e.jsxs("span",{className:"my-4 fs-16 font-w600 d-block",children:["1 BRST = ",this.state.precioBrst," TRX"]}),e.jsx("p",{className:"text-start",children:t("brst.description")})]})]})})}),e.jsx("div",{className:"card-footer p-2 border-0",children:e.jsx("a",{href:"https://brutus.finance/brutusblog.html",className:"btn btn-link text-primary",children:t("brst.button.readM")})})]})}),e.jsx("div",{className:"col-xl-6 col-sm-6 wow fadeInUp","data-wow-delay":"0.4s",children:e.jsxs("div",{className:"card quick-trade",children:[e.jsx("div",{className:"card-header pb-0 border-0 flex-wrap",children:e.jsx("div",{children:e.jsxs("h4",{className:"heading mb-0",children:[t("brst.exchange")," V4.1"]})})}),e.jsxs("div",{className:"container",children:[e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-12 pb-2",children:"From"}),e.jsx("div",{className:"col-2 ",children:e.jsx("img",{height:"42px",src:"/images/token/"+this.state.from+".png",alt:"tron logo"})}),e.jsx("div",{className:"col-3",style:{paddingLeft:"0px",paddingRight:"0px"},children:e.jsxs("select",{style:{color:"white",backgroundColor:"var(--primary)",cursor:"pointer",borderRadius:"0.625rem 0 0 0.625rem"},className:"form-select",id:"currencySelectFrom",onChange:this.handleCurrencyChangeFrom,children:[e.jsx("option",{value:"trx",children:"TRX "}),e.jsx("option",{value:"usdt",children:"USDT "}),e.jsx("option",{value:"usdd",children:"USDD "}),e.jsx("option",{value:"brst",children:"BRST "})]})}),e.jsx("div",{className:"col-7",style:{paddingLeft:"0px"},children:e.jsx("input",{className:"form-control form-control text-end",style:{borderRadius:"0 0.625rem 0.625rem 0"},type:"number",id:"amountFrom",onInput:()=>this.calcExchange(!1,this.state.from+"_"+this.state.to),placeholder:f,min:this.state.minCompra,step:.1})})]}),e.jsx("hr",{}),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-12 pb-2",children:"To"}),e.jsx("div",{className:"col-2",children:e.jsx("img",{height:"42px",src:"/images/token/"+this.state.to+".png",alt:"brst logo"})}),e.jsx("div",{className:"col-3",style:{paddingLeft:"0px",paddingRight:"0px"},children:e.jsxs("select",{style:{color:"white",backgroundColor:"var(--primary)",cursor:"pointer",borderRadius:"0.625rem 0 0 0.625rem"},className:"form-select",id:"currencySelectTo",onChange:this.handleCurrencyChangeTo,children:[e.jsx("option",{value:"brst",children:"BRST "}),e.jsx("option",{value:"trx",children:"TRX "})]})}),e.jsx("div",{className:"col-7",style:{paddingLeft:"0px"},children:e.jsx("input",{className:"form-control form-control text-end",style:{borderRadius:"0 0.625rem 0.625rem 0"},type:"number",id:"amountTo",onInput:()=>this.calcExchange(!0,this.state.to+"_"+this.state.from),placeholder:y,min:this.state.minventa,step:1e-4})})]})]}),e.jsxs("div",{className:"card-footer border-0",children:[s,e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-12 text-center",children:b})}),e.jsxs("div",{className:"d-flex mt-2",style:{justifyContent:"space-between"},children:[e.jsx("p",{className:"mb-0 fs-14",children:t("brst.energy",{e1:P.toLocaleString("en-US")})}),e.jsxs("p",{className:"mb-0 fs-14",children:["Fee ~ ",this.state.useTrx," TRX"]})]})]})]})}),e.jsx("div",{className:"col-xl-6 col-sm-12 wow fadeInUp","data-wow-delay":"0.6s",children:e.jsxs("div",{className:"card price-list",children:[e.jsx("div",{className:"card-header border-0 pb-2",children:e.jsx("div",{className:"chart-title",children:e.jsx("h4",{className:" mb-0",style:{color:"var(--primary)"},children:t("mya")})})}),e.jsx("div",{className:"card-body p-3 py-0",children:e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table text-center bg-warning-hover order-tbl",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left",children:t("token")}),e.jsx("th",{className:"text-center",children:t("amount")}),e.jsx("th",{className:"text-center",children:t("value")})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{style:{cursor:"pointer"},onClick:()=>{this.llenarBRST()},children:[e.jsx("td",{className:"text-left",children:"BRST"}),e.jsx("td",{children:this.state.balanceBRST}),e.jsxs("td",{children:[new x(this.state.balanceBRST*this.state.precioBrst*this.state.precioUSDD).dp(2).toNumber().toLocaleString("en-US")," ","USDD"]})]}),e.jsxs("tr",{style:{cursor:"pointer"},onClick:()=>{this.llenarTRX()},children:[e.jsx("td",{className:"text-left",children:"TRX"}),e.jsx("td",{children:this.state.balanceTRX}),e.jsxs("td",{children:[new x(this.state.balanceTRX*this.state.precioUSDD).dp(2).toNumber().toLocaleString("en-US")," ","USDD"]})]}),e.jsxs("tr",{style:{cursor:"pointer"},onClick:()=>{this.llenarTRX()},children:[e.jsx("td",{className:"text-left",children:"USDT"}),e.jsx("td",{children:this.state.balanceUSDT.toLocaleString("en-US")}),e.jsx("td",{children:"--.--"})]}),e.jsxs("tr",{style:{cursor:"pointer"},onClick:()=>{this.llenarTRX()},children:[e.jsx("td",{className:"text-left",children:"USDD"}),e.jsx("td",{children:this.state.balanceUSDD.toLocaleString("en-US")}),e.jsx("td",{children:"--.--"})]})]})]})})}),e.jsx("div",{className:"card-footer text-center py-3 border-0",children:e.jsxs("a",{href:"/",className:"btn-link text-black",children:[t("showM"),e.jsx("i",{className:"fa fa-caret-right"})]})})]})})]})})})})}),e.jsxs("div",{className:"row mx-0",children:[e.jsx("div",{className:"col-lg-12",children:e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"card-header",children:[e.jsx("h4",{className:"card-title",children:"Your last earnings staking "}),e.jsxs("h6",{className:"card-subtitle",children:[this.state.misBRST," BRST ="," ",(this.state.misBRST*this.state.precioBrst).toFixed(3)," TRX"]})]}),e.jsx("div",{className:"card-body",children:e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-hover table-responsive-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:t("day")}),e.jsx("th",{children:t("earned")}),e.jsx("th",{children:t("brst.dailyG")})]})}),e.jsx("tbody",{children:z.map(i=>e.jsxs("tr",{children:[e.jsx("th",{children:t("brst.daysAgo",{days:i.dias})}),e.jsxs("td",{children:[i.trx.toFixed(6)," TRX"]}),e.jsxs("td",{className:"color-primary",children:[i.diario.toFixed(6)," TRX/",t("day")," "]})]},i.dias.toString()))})]})})})]})}),e.jsx("div",{className:"col-12",id:"request-brst",children:e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header d-sm-flex d-block pb-0 border-0",children:e.jsxs("div",{children:[e.jsxs("h4",{className:"fs-20 text-black",children:[t("brst.request",{returnObjects:!0,number:g})[0],e.jsxs("button",{className:"btn  btn-success text-white",onClick:()=>this.estado(),children:[t("brst.request",{returnObjects:!0})[1]," ",e.jsx("i",{className:"bi bi-arrow-repeat"})]})]}),e.jsx("p",{className:"mb-0 fs-12",children:t("brst.request",{returnObjects:!0})[2]})]})}),e.jsx("div",{className:"card-body",children:F})]})}),e.jsx("div",{className:"col-lg-12",children:e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"card-header",children:[e.jsxs("h4",{className:"card-title",children:[t("brst.estimate")," ",e.jsx("br",{}),"APR: ",a," % ",e.jsx("br",{}),"APY: ",o,"%"]}),e.jsx("br",{}),e.jsxs("h6",{className:"card-subtitle",style:{cursor:"pointer"},onClick:()=>{document.getElementById("hold").value=this.state.balanceBRST,this.handleChangeCalc({target:{value:this.state.balanceBRST}})},children:[t("brst.mystaking"),this.state.misBRST," BRST ="," ",(this.state.misBRST*this.state.precioBrst).toFixed(3)," TRX"]})]}),e.jsxs("div",{className:"card-body",children:[e.jsx("b",{children:"Days Average: "}),e.jsx("input",{type:"number",id:"daysProm",defaultValue:k,placeholder:k+" days",min:1,step:1,onInput:async()=>{let i=parseInt(document.getElementById("daysProm").value);await this.setState({tiempoPromediado:isNaN(i)?1:i}),this.estado()}}),e.jsxs("div",{className:"table-responsive overflow-scroll",style:{marginTop:"30px",height:"420px",border:"2px solid rgba(207, 207, 207, 0.97)",borderRadius:"10px"},children:[e.jsx("table",{className:"table table-hover table-responsive-sm",children:e.jsx("tbody",{children:e.jsxs("tr",{children:[e.jsxs("th",{children:["Days Hold",e.jsx("br",{}),e.jsx("input",{type:"number",id:"days",defaultValue:u,onInput:this.handleChangeDias}),e.jsx("br",{}),e.jsx("br",{}),e.jsx("button",{className:"btn btn-primary",onClick:()=>{p=p.unshift({days:u,amount:parseFloat(document.getElementById("hold").value.replace(/,/g,".")),time:Date.now(),APY:S})},children:"Calculate"})]}),e.jsxs("th",{children:["Your BRST",e.jsx("br",{}),e.jsx("input",{type:"number",id:"hold",defaultValue:0,onInput:this.handleChangeCalc})]})]})})}),e.jsxs("table",{className:"table table-hover table-responsive-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:t("day",{count:10})}),e.jsx("th",{children:t("brst.hold")}),e.jsx("th",{children:t("brst.estimateIn")})]})}),e.jsx("tbody",{children:p.map(i=>(i.amount=parseFloat(i.amount),i.amount=isNaN(i.amount)||i.amount<=0?this.state.misBRST:i.amount,i.days=isNaN(i.days)?1:i.days,i.time=isNaN(i.time)?Date.now():i.time,e.jsxs("tr",{children:[e.jsx("th",{children:i.days}),e.jsxs("td",{children:[i.amount," BRST",e.jsx("br",{}),(i.amount*l).toFixed(3)," TRX"]}),e.jsxs("td",{children:[(i.amount*l*(S*i.days/100)).toFixed(6)," ","TRX"]})]},"prospect-days-"+i.days+"-"+i.amount+"-"+i.time)))})]})]})]})]})}),e.jsx("div",{className:"col-lg-12",children:e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h4",{className:"card-title",children:"Smart Contracts "})}),e.jsx("div",{className:"card-body",children:e.jsxs("p",{children:[e.jsx("b",{children:"Token:"})," ",e.jsx("a",{target:"_blank",rel:"noopener noreferrer",href:"https://tronscan.org/#/contract/"+M.BRST+"/code",children:M.BRST}),e.jsx("br",{}),e.jsx("b",{children:"Regular withdrawals:"})," ",e.jsx("a",{target:"_blank",rel:"noopener noreferrer",href:"https://tronscan.org/#/contract/"+M.ProxySC2+"/code",children:M.ProxySC2}),e.jsx("br",{}),e.jsx("b",{children:"Fast withdrawals:"})," ",e.jsx("a",{target:"_blank",rel:"noopener noreferrer",href:"https://tronscan.org/#/contract/"+M.ProxySC3+"/code",children:M.ProxySC3})]})})]})})]}),e.jsx("div",{className:"modal fade",id:"mensaje-brst",children:e.jsx("div",{className:"modal-dialog",role:"document",children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h5",{className:"modal-title",children:this.state.ModalTitulo}),e.jsx("button",{type:"button",className:"btn-close","data-bs-dismiss":"modal"})]}),e.jsx("div",{className:"modal-body",children:e.jsx("p",{children:this.state.ModalBody})})]})})})]})}}const je=ae()(me);export{je as default};
