import{a0 as v,a1 as _,F as i,V as e}from"./libs-CZASmHnA.js";import{c as p,u as N}from"./index-B4BvhLCA.js";import"./web3-crypto-BAtjRPbI.js";const j=[{amount:65e3,text:"65K"},{amount:13e4,text:"130K"},{amount:2e5,text:"200K"},{amount:1e6,text:"1M"},{amount:3e6,text:"3M"}],S=[{amount:1e3,text:"1k"},{amount:2e3,text:"2k"},{amount:5e3,text:"5k"},{amount:1e4,text:"10k"},{amount:5e4,text:"50k"}];let f;class C extends _.Component{constructor(s){super(s),this.state={deposito:"Loading...",wallet:"Loading...",precio:"****",wallet_orden:"",recurso:"energy",cantidad:32e3,montoMin:32e3,minPrice:"2.56",periodo:5,temporalidad:"min",duration:"5min",av_band:new i(0),av_energy:new i(0),available_bandwidth:[],available_energy:[],total_bandwidth_pool:0,total_energy_pool:0,titulo:"Titulo",body:"Cuerpo del mensaje",amounts:j,energyOn:!1,bandOn:!1,fromUrl:!0,unitEnergyPrice:new i(1),precios:{energy:[],bandwidth:[]},referral:!1},this.handleChangePeriodo=this.handleChangePeriodo.bind(this),this.handleChangeWallet=this.handleChangeWallet.bind(this),this.updateAmount=this.updateAmount.bind(this),this.estado=this.estado.bind(this),this.recursos=this.recursos.bind(this),this.calcularRecurso=this.calcularRecurso.bind(this),this.calcularPrecios=this.calcularPrecios.bind(this),this.preCompra=this.preCompra.bind(this),this.compra=this.compra.bind(this)}async componentDidMount(){const{t:s}=this.props;document.getElementById("tittle").innerText=s("ebot.tittle"),setTimeout(()=>{this.estado()},2*1e3),f=setInterval(()=>{this.estado()},15*1e3)}componentWillUnmount(){clearInterval(f)}handleChangeWallet(s){let o=s.target.value;this.setState({wallet_orden:o})}async handleChangePeriodo(s){let o=s.target.value.toLowerCase(),a="d";document.getElementById("periodo").value=o,(o.split("h").length>1||o.split("hora").length>1)&&(a="h"),(o.split("m").length>1||o.split("min").length>1)&&(a="m"),await this.setState({periodo:parseInt(o),temporalidad:a,duration:parseInt(o)+a}),this.calcularRecurso()}updateAmount(s){let{recurso:o}=this.state,a=32e3;o==="bandwidth"&&(a=1e3),this.setState({montoMin:a});let n=0;if(s){n=s;try{let t=document.getElementById("amount");t&&(t.value=s)}catch(t){console.log(t)}}else try{let t=document.getElementById("amount");t&&(n=t.value)}catch(t){console.log(t)}return n=parseInt(n),(parseInt(n)<a||isNaN(n))&&(n=a),this.setState({cantidad:n}),n}async estado(){let{fromUrl:s}=this.state;await this.calcularPrecios();let o=document.location.href;if((o.indexOf("amount")>0||o.indexOf("amb")>0)&&s){let u=o.split("?")[1].split("&"),r={},d;for(var a=0,n=u.length;a<n;a++)d=u[a].split("="),r[d[0]]=unescape(decodeURI(d[1]));if(parseInt(r.amount)>=32e3){let c=parseInt(r.amount),m="energy",l="5min";r.resource!==void 0&&(m=r.resource),m==="band"||m==="bandwidth"?m="bandwidth":m="energy",r.duration!==void 0&&(l=r.duration),await this.setState({cantidad:c,recurso:m,temporalidad:"m",periodo:"5",duration:l,fromUrl:!1}),this.updateAmount(c),this.preCompra()}r.amb!==void 0&&await this.setState({referral:r.amb})}this.calcularRecurso()}async recursos(){let{energyOn:s,bandOn:o}=this.state,a=!1;const n=p.BOT_URL;if(a=await fetch(n).then(l=>l.json()).catch(l=>(console.log(l),!1)),s=a.available,o=a.available,a=await fetch(n+"available").then(l=>l.json()).catch(l=>(console.log(l),!1)),!a)return!1;let t=[{duration:"5min",available:a.av_energy[0].available},{duration:"1h",available:a.av_energy[0].available},{duration:"1d",available:a.av_energy[1].available},{duration:"3d",available:a.av_energy[2].available},{duration:"7d",available:a.av_energy[3].available},{duration:"14d",available:a.av_energy[3].available},{duration:"30d",available:a.av_energy[3].available}],u=[{duration:"5min",available:a.av_band[0].available},{duration:"1h",available:a.av_band[0].available},{duration:"1d",available:a.av_band[1].available},{duration:"3d",available:a.av_band[2].available},{duration:"7d",available:a.av_band[3].available},{duration:"14d",available:a.av_band[3].available},{duration:"30d",available:a.av_band[3].available}],r=document.getElementById("periodo"),d="5min";r&&(d=r.value),this.setState({duration:d});let c=t.find(l=>l.duration===d);c=new i(c.available),this.setState({av_energy:c});let m=u.find(l=>l.duration===d);return m=new i(m.available),this.setState({av_band:m}),this.setState({available_bandwidth:u,available_energy:t,total_bandwidth_pool:a.total_bandwidth_pool,total_energy_pool:a.total_energy_pool,energyOn:s,bandOn:o}),s}async calcularPrecios(){await this.recursos();let{precios:s,duration:o,recurso:a}=this.state,n=p.BOT_URL+"/prices/all",t=await fetch(n,{method:"GET",headers:{"Content-Type":"application/json"}}).then(async r=>await r.json()).catch(r=>(console.log(r),!1));t&&(s.energy=[{duration:"5min",UE:new i(t.energy_minutes_100K).shiftedBy(1).dp(6).toNumber()},{duration:"1h",UE:new i(t.energy_hour_100K).shiftedBy(1).dp(6).toNumber()},{duration:"1",UE:new i(t.energy_one_day_100K).shiftedBy(1).dp(6).toNumber()},{duration:"2",UE:new i(t.energy_over_one_day_100K).shiftedBy(1).dp(6).toNumber()},{duration:"3",UE:new i(t.energy_over_one_day_100K).shiftedBy(1).dp(6).toNumber()},{duration:"4",UE:new i(t.energy_over_one_day_100K).shiftedBy(1).dp(6).toNumber()},{duration:"7",UE:new i(t.energy_over_one_day_100K).shiftedBy(1).times(7/3).dp(6).toNumber()},{duration:"14",UE:new i(t.energy_over_one_day_100K).shiftedBy(1).times(14/3).dp(6).toNumber()},{duration:"30",UE:new i(t.energy_over_one_day_100K).shiftedBy(1).times(30/3).dp(6).toNumber()}],s.bandwidth=[{duration:"5min",UE:new i(t.band_minutes_1000).times(1e3).dp(6).toNumber()},{duration:"1h",UE:new i(t.band_hour_1000).times(1e3).dp(6).toNumber()},{duration:"1",UE:new i(t.band_one_day_1000).times(1e3).dp(6).toNumber()},{duration:"2",UE:new i(t.band_one_day_1000).times(1e3).dp(6).toNumber()},{duration:"3",UE:new i(t.band_over_one_day_1000).times(1e3).dp(6).toNumber()},{duration:"4",UE:new i(t.band_over_one_day_1000).times(1e3).dp(6).toNumber()},{duration:"7",UE:new i(t.band_over_one_day_1000).times(1e3).times(7/3).dp(6).toNumber()},{duration:"14",UE:new i(t.band_over_one_day_1000).times(1e3).times(14/3).dp(6).toNumber()},{duration:"30",UE:new i(t.band_over_one_day_1000).times(1e3).times(30/3).dp(6).toNumber()}],this.setState({precios:s}));let u=s[a];if(u.length>0){const r=u.find(d=>d.duration===o);r!==void 0&&this.setState({unitEnergyPrice:r.UE})}return s}async calcularRecurso(){let{t:s}=this.props;this.calcularPrecios();let{recurso:o,montoMin:a,precio:n,duration:t}=this.state,u=this.updateAmount(),r=!0;t.indexOf("d")>=0&&((parseInt(t[0])<1||parseInt(t[0])>14)&&(this.setState({titulo:s("ebot.alert.eRange",{returnObjects:!0})[0],body:s("ebot.alert.eRange",{returnObjects:!0})[1]}),r=!1,window.$("#mensaje-ebot").modal("show")),t=t.split("d")[0]),t.indexOf("h")>=0&&(parseInt(t[0])!==1&&(this.setState({titulo:s("ebot.alert.eRange",{returnObjects:!0})[0],body:s("ebot.alert.eRange2"),periodo:"1"}),r=!1,window.$("#mensaje-ebot").modal("show")),t="1h"),t.indexOf("m")>=0&&(parseInt(t[0])!==5&&(this.setState({titulo:s("ebot.alert.eRange",{returnObjects:!0})[0],body:s("ebot.alert.eRange2"),periodo:"5"}),r=!1,window.$("#mensaje-ebot").modal("show")),t="5min");let d=this.state.precios[o];if(r&&d.length>0){const c=d.find(m=>m.duration===t);n=new i(c.UE).times(u),n=n.plus(0),n=n.shiftedBy(-6).dp(6),this.setState({unitEnergyPrice:c.UE}),parseInt(u)<=a&&this.setState({minPrice:n})}else n="**.**";return this.setState({precio:n}),n}async preCompra(){const{t:s,isViewerMode:o}=this.props;if(o){this.setState({titulo:"To continue",body:"Connect your wallet to perform this operation."}),window.$("#mensaje-ebot").modal("show");return}await this.recursos();let{wallet_orden:a,cantidad:n,periodo:t,temporalidad:u,recurso:r,energyOn:d,bandOn:c,av_energy:m,av_band:l,total_energy_pool:h,total_bandwidth_pool:w}=this.state,{accountAddress:y,tronWeb:x,i18n:b}=this.props;if(!d||!c){this.setState({titulo:b.t("ebot.alert.eResource",{returnObjects:!0})[0],body:e.jsx("span",{children:b.t("ebot.alert.eResource",{returnObjects:!0})[1]})}),window.$("#mensaje-ebot").modal("show");return}m.toNumber()<h*.005&&(d=!1,r==="energy"&&(this.setState({titulo:e.jsx(e.Fragment,{children:s("ebot.alert.soldOut",{returnObjects:!0})[0]}),body:e.jsxs(e.Fragment,{children:[" ",e.jsx("img",{src:"/images/alerts/recarge_energy.jpeg",alt:"Energy sold out",style:{borderRadius:"15px",width:"100%"}})," ",e.jsx("br",{}),e.jsx("br",{}),s("ebot.alert.soldOut",{returnObjects:!0})[1]]})}),window.$("#mensaje-ebot").modal("show"))),l.toNumber()<w*.005&&(c=!1,r!=="energy"&&(this.setState({titulo:s("ebot.alert.soldOut",{returnObjects:!0})[0],body:s("ebot.alert.soldOut",{returnObjects:!0})[1]}),window.$("#mensaje-ebot").modal("show")));let g=(await this.calcularRecurso()).toNumber();if(isNaN(g)){this.setState({titulo:"Error",body:"error to calculating price of resource"}),window.$("#mensaje-ebot").modal("show");return}if((a===""||!x.isAddress(a))&&this.setState({wallet_orden:y}),parseFloat(g)>new i(await x.trx.getBalance(y)).shiftedBy(-6).toNumber()){this.setState({titulo:b.t("ebot.alert.noFounds",{returnObjects:!0})[0],body:e.jsx("span",{children:b.t("ebot.alert.noFounds",{returnObjects:!0})[1]})}),window.$("#mensaje-ebot").modal("show");return}if((a===""||!x.isAddress(a))&&this.setState({wallet_orden:y}),a==="T9yD14Nj9j7xAB4dbGeiX9h8unkKHxuWwb"){this.setState({titulo:b.t("ebot.alert.eTronlink",{returnObjects:!0})[0],body:e.jsxs("span",{children:[b.t("ebot.alert.eTronlink",{returnObjects:!0})[1],e.jsx("br",{}),e.jsx("button",{className:"btn btn-danger","data-bs-dismiss":"modal",children:"Ok"})]})}),window.$("#mensaje-ebot").modal("show");return}if(r==="energy"){if(n>m.toNumber()){this.setState({titulo:"Error",body:"insufficient resources to cover this order try a lower value or try again later."}),window.$("#mensaje-ebot").modal("show");return}}else if(n>l.toNumber()){this.setState({titulo:"Error",body:"insufficient resources to cover this order try a lower value or try again later."}),window.$("#mensaje-ebot").modal("show");return}this.setState({titulo:e.jsx(e.Fragment,{children:"Confirm order information"}),body:e.jsxs("span",{children:[e.jsx("b",{children:"Buy: "})," ",n+" "+r+" "+t+u,e.jsx("br",{}),e.jsx("b",{children:"For: "})," ",g," TRX",e.jsx("br",{}),e.jsx("b",{children:"To: "})," ",this.state.wallet_orden,e.jsx("br",{}),e.jsx("br",{}),e.jsx("br",{}),e.jsxs("button",{type:"button",className:"btn btn-danger",onClick:()=>{window.$("#mensaje-ebot").modal("hide")},children:["Cancel ",e.jsx("i",{className:"bi bi-x-circle"})]})," ",e.jsxs("button",{type:"button",className:"btn btn-success",onClick:()=>{this.compra(n,t,u,r,a,g)},children:["Confirm ",e.jsx("i",{className:"bi bi-bag-check"})]})]})}),window.$("#mensaje-ebot").modal("show")}async compra(){let{cantidad:s,periodo:o,temporalidad:a,recurso:n,wallet_orden:t,precio:u,referral:r}=this.state;const d=e.jsx("img",{src:"images/cargando.gif",height:"20px",alt:"loading..."});this.setState({titulo:e.jsxs(e.Fragment,{children:["Confirm transaction ",d]}),body:e.jsx(e.Fragment,{children:"Please confirm the transaction from your wallet "})}),window.$("#mensaje-ebot").modal("show");const c=await this.props.tronWeb.transactionBuilder.sendTrx(p.WALLET_API,this.props.tronWeb.toSun(u),this.props.accountAddress),m=await window.tronWeb.trx.sign(c).catch(h=>(this.setState({ModalTitulo:"Transaction failed",ModalBody:e.jsxs(e.Fragment,{children:[h.toString(),e.jsx("br",{}),e.jsx("br",{}),e.jsx("button",{type:"button",className:"btn btn-danger",onClick:()=>{window.$("#mensaje-brst").modal("hide")},children:"Close"})]})}),window.$("#mensaje-brst").modal("show"),!1));if(!m)return!1;this.setState({titulo:e.jsxs(e.Fragment,{children:["Your order is being processed ",d]}),body:"Wait while one of our robots attends to your recharge, we try to be as fast as possible."});let l=await N.rentResource(t,n,s,o,a,u,m,r);l.result?(this.setState({titulo:"Completed successfully",body:e.jsxs(e.Fragment,{children:["Rental of ",n," is completed successfully.",e.jsx("br",{}),e.jsx("br",{})," ",e.jsx("button",{type:"button","data-bs-dismiss":"modal",className:"btn btn-success",children:"Thank you!"})]})}),window.$("#mensaje-ebot").modal("show")):(console.log(l),this.setState({titulo:"Contact support",body:"Support hash: "+l.hash+" | "+l.msg}),window.$("#mensaje-ebot").modal("show"))}render(){const{t:s}=this.props;let{unitEnergyPrice:o,amounts:a,recurso:n,av_energy:t,av_band:u}=this.state;const r=a.map(h=>e.jsx("button",{id:"ra1",type:"button",className:"btn btn-primary",style:{margin:"auto"},onClick:()=>{this.updateAmount(h.amount),this.estado()},children:h.text},"Amb-"+h.text));let d=e.jsxs(e.Fragment,{children:["Bandwidth Pool:"," ",u.toString(10).replace(/\B(?=(\d{3})+(?!\d))/g,",")]}),c=u.toNumber()*100/this.state.total_bandwidth_pool;n==="energy"&&(d=e.jsxs(e.Fragment,{children:["Energy Pool:"," ",t.toString(10).replace(/\B(?=(\d{3})+(?!\d))/g,",")]}),c=t.toNumber()*100/this.state.total_energy_pool),isNaN(c)&&(c=0);let m=e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:"font-14",children:[d," (",new i(c).dp(2).toString(10),"%)"]}),e.jsx("div",{className:"progress",style:{margin:"5px",backgroundColor:"lightgray"},children:e.jsx("div",{className:"progress-bar",role:"progressbar",style:{width:c+"%"},"aria-valuenow":c,"aria-valuemin":"0","aria-valuemax":"100"})})]});function l(h){return h.charAt(0).toUpperCase()+h.slice(1)}return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"row ",children:[e.jsx("div",{className:"col-md-12 text-center",children:e.jsx("h1",{children:s("ebot.subTittle")})}),e.jsx("div",{className:"col-lg-6 col-sm-12",children:e.jsx("div",{className:"contact-box",children:e.jsx("div",{className:"card",children:e.jsx("div",{className:"card-body",children:e.jsx("div",{className:"mb-4",children:e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-6",children:e.jsxs("h4",{children:["Rental ",this.state.recurso]})}),e.jsx("div",{className:"col-6",children:e.jsx("div",{className:"d-flex justify-content-sm-end",children:e.jsxs("div",{className:"btn-group",role:"group",children:[e.jsx("button",{id:"btnGroupDrop1",type:"button",className:"btn btn-primary dropdown-toggle","data-bs-toggle":"dropdown","aria-expanded":"false",children:"Resource"}),e.jsxs("ul",{className:"dropdown-menu","aria-labelledby":"btnGroupDrop1",children:[e.jsx("li",{onClick:async()=>{await this.setState({cantidad:32e3,recurso:"energy",amounts:j}),this.updateAmount(32e3),await this.estado()},children:e.jsx("button",{className:"dropdown-item",children:"Energy"})}),e.jsx("li",{onClick:async()=>{await this.setState({cantidad:1e3,recurso:"bandwidth",amounts:S}),this.updateAmount(1e3),await this.estado()},children:e.jsx("button",{className:"dropdown-item",children:"Bandwidth"})})]})]})})}),e.jsxs("form",{className:"dzForm",method:"",action:"",children:[e.jsx("div",{className:"dzFormMsg"}),e.jsx("input",{type:"hidden",className:"form-control",name:"dzToDo",value:"Contact"}),m,e.jsxs("div",{className:"col-12 mt-2 mb-2 d-flex justify-content-center align-items-center",children:[e.jsx("p",{style:{marginTop:"auto",marginRight:"10px"},className:"font-14",children:"Amount"}),e.jsx("input",{style:{textAlign:"end",border:"lightgray  solid"},id:"amount",name:"dzLastName",type:"text",onInput:()=>this.calcularRecurso(),className:"form-control mb-1",placeholder:this.state.montoMin})]}),e.jsx("div",{className:"col-xl-12 mt-2 mb-2",children:e.jsx("div",{className:"d-flex justify-content-xl-center",children:r})}),e.jsxs("div",{className:"col-12 mt-2 mb-2 d-flex justify-content-center align-items-center",children:[e.jsx("p",{style:{marginTop:"auto",marginRight:"10px"},className:"font-14",children:"Duration"}),e.jsx("input",{style:{textAlign:"end",border:"lightgray  solid",cursor:"not-allowed"},id:"periodo",required:!0,type:"text",className:"form-control mb-1",onChange:this.handleChangePeriodo,placeholder:"Default: 5m (five minutes)",defaultValue:"5min",readOnly:!0})]}),e.jsx("div",{className:"col-12 mt-2 mb-2 ",children:e.jsxs("div",{className:"d-flex justify-content-xl-center",children:[e.jsx("button",{type:"button",className:"btn btn-primary",style:{margin:"auto"},onClick:()=>{this.handleChangePeriodo({target:{value:"5min"}})},children:"5m"}),e.jsx("button",{type:"button",className:"btn btn-primary",style:{margin:"auto"},onClick:()=>{this.handleChangePeriodo({target:{value:"1h"}})},children:"1h"}),e.jsx("button",{type:"button",className:"btn btn-primary",style:{margin:"auto"},onClick:()=>{this.handleChangePeriodo({target:{value:"1d"}})},children:"1d"}),e.jsx("button",{type:"button",className:"btn btn-primary",style:{margin:"auto"},onClick:()=>{this.handleChangePeriodo({target:{value:"3d"}})},children:"3d"}),e.jsx("button",{type:"button",className:"btn btn-primary",style:{margin:"auto"},onClick:()=>{this.handleChangePeriodo({target:{value:"14d"}})},children:"14d"}),e.jsx("button",{type:"button",className:"btn btn-primary",style:{margin:"auto"},onClick:()=>{this.handleChangePeriodo({target:{value:"30d"}})},children:"30d"})]})}),e.jsxs("div",{className:"col-12 mt-2 mb-2 justify-content-center align-items-center",children:[l(this.state.recurso)," Unit:"," ",o.toString(10)," SUN",e.jsx("br",{}),e.jsxs("button",{name:"submit",type:"button",value:"Submit",className:"btn btn-secondary",style:{width:"100%",height:"40px",marginTop:"5px"},onClick:()=>this.preCompra(),children:[" ","Complete Purchase - Total:"," ",this.state.precio.toString(10)," TRX"]})]}),e.jsxs("div",{className:"col-xl-12 mb-3 mb-md-4",children:[e.jsxs("p",{className:"font-14",children:["Send resources to this wallet ","⬇️"]}),e.jsx("input",{name:"dzFirstName",required:!0,type:"text",className:"form-control",placeholder:this.props.accountAddress,onChange:this.handleChangeWallet})]})]})]})})})})})}),e.jsx("div",{className:"col-lg-6 pt-4 mt-5 col-sm-12 m-b30",children:e.jsxs("div",{className:"info-box text-center",children:[e.jsx("img",{src:"images/ebot.png",width:"170px",className:"figure-img img-fluid rounded",alt:"resource rental energy"}),e.jsx("div",{className:"info",children:e.jsxs("p",{className:"font-20 p-5",children:["In Brutus Energy Bot, we've developed an app for a faster and secure resource rental experience on the Tron network."," ",e.jsx("br",{}),e.jsx("br",{}),"Innovatively simplifying the process, we ensure efficient management at competitive prices. Explore further through our"," ",e.jsx("a",{style:{color:"purple",textDecoration:"underline"},href:"https://t.me/BRUTUS_energy_bot",children:"Telegram bot"})," ","or API for added accessibility. ",e.jsx("br",{}),e.jsx("br",{}),"For additional information, contact us via our"," ",e.jsx("a",{style:{color:"purple",textDecoration:"underline"},href:"https://t.me/brutus_comunidad_sr",children:"Telegram group"})," ","or reach out to us at"," ",e.jsx("a",{style:{color:"purple",textDecoration:"underline"},href:"mailto:support@brutus.finance",children:"support@brutus.finance"}),e.jsx("br",{}),e.jsx("br",{}),"Do you want to sell your energy/bandwidth and earn daily income?"," ",e.jsx("a",{style:{color:"purple",textDecoration:"underline"},href:"https://brutus.finance/provider/",children:"Join us as a provider now!"})]})}),e.jsx("div",{className:"widget widget_about",children:e.jsx("div",{className:"widget widget_getintuch"})}),e.jsx("div",{className:"social-box dz-social-icon style-3"})]})}),e.jsx("div",{className:"col-lg-12",children:e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h4",{className:"card-title",children:"Smart Contracts "})}),e.jsx("div",{className:"card-body",children:e.jsxs("p",{children:[e.jsx("b",{children:"Rental operator:"})," ",e.jsx("a",{target:"_blank",rel:"noopener noreferrer",href:"https://tronscan.org/#/contract/"+p.WALLET_API+"/code",children:p.WALLET_API})]})})]})})]}),e.jsx("div",{className:"modal fade",id:"mensaje-ebot",children:e.jsx("div",{className:"modal-dialog",role:"document",children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h5",{className:"modal-title",children:this.state.titulo}),e.jsx("button",{type:"button",className:"btn-close","data-bs-dismiss":"modal"})]}),e.jsx("div",{className:"modal-body",children:e.jsx("p",{children:this.state.body})})]})})})]})}}const O=v()(C);export{O as default};
